<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Fast Planning | DropBuss Development</title>
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- Animate.css -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css">
    <!-- Chart.js -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="css/fastplanning.css">
</head>
<body>
    <!-- Navigation -->
    <nav class="navbar navbar-expand-lg navbar-dark">
        <div class="container">
            <a class="navbar-brand" href="index.html">
                <img src="db.png" width="140px" height="40px" alt="Logo">
                DropBuss Development
            </a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav ms-auto">
                    <li class="nav-item">
                        <a class="nav-link" href="index.html">Home</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link active" href="Fastplanning.html">Fast Planning</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="Invest.html">Investment</a>
                    </li>
                </ul>
            </div>
        </div>
    </nav>

    <div class="container">
        <div class="row justify-content-center">
            <div class="col-lg-10">
                <div class="calculator-container animate__animated animate__fadeIn">
                    <h1 class="text-center mb-5">Business Planning Calculator</h1>
                    <div class="row">
                        <div class="col-md-6">
                            <form id="recommendationForm">
                                <div class="mb-4">
                                    <label for="modalPrice" class="form-label">Capital Cost per Pcs:</label>
                                    <div class="input-group">
                                        <span class="input-group-text">Rp.</span>
                                        <input type="number" id="modalPrice" class="form-control" required>
                                    </div>
                                </div>
                                
                                <div class="mb-4">
                                    <label for="profitPercentage" class="form-label">Percentage of Net Profit:</label>
                                    <select id="profitPercentage" class="form-select" required>
                                        <script>
                                            for (let i = 5; i <= 100; i += 5) {
                                                document.write(`<option value="${i}">${i}%</option>`);
                                            }
                                        </script>
                                    </select>
                                </div>
                                
                                <div class="mb-4">
                                    <label for="employeeCost" class="form-label">Employee Costs (per month):</label>
                                    <div class="input-group">
                                        <span class="input-group-text">Rp.</span>
                                        <input type="number" id="employeeCost" class="form-control" required>
                                    </div>
                                </div>
                                
                                <div class="mb-4">
                                    <label for="numEmployees" class="form-label">Employee Number:</label>
                                    <input type="number" id="numEmployees" class="form-control" required>
                                </div>
                                
                                <div class="mb-4">
                                    <label for="workschedule" class="form-label">Total works in 1 week:</label>
                                    <select id="workschedule" class="form-select" required>
                                        <option value="1">1 Day</option>
                                        <script>
                                            for (let i = 2; i <= 7; i += 1) {
                                                document.write(`<option value="${i}">${i} Days</option>`);
                                            }
                                        </script>
                                    </select>
                                </div>
                                
                                <div class="mb-4">
                                    <label for="targetIncome" class="form-label">Profit Targets (per month):</label>
                                    <div class="input-group">
                                        <span class="input-group-text">Rp.</span>
                                        <input type="number" id="targetIncome" class="form-control" required>
                                    </div>
                                </div>
                                
                                <button type="submit" class="btn btn-primary w-100">Calculate</button>
                            </form>
                        </div>
                        
                        <div class="col-md-6">
                            <div class="result-card">
                                <h2 class="result-title">MONTHLY RECAPITULATION</h2>
                                
                                <h3 class="result-title">Product Sale Price</h3>
                                <p>Capital Cost: <span class="result-value" id="modalPriceResult"></span>/Pcs</p>
                                <p>Profit: <span class="result-value" id="profitResult"></span>/Pcs (<span id="profitPercentageResult"></span>)</p>
                                <p class="highlight">Sale Price: <span class="result-value" id="totalPriceResult"></span>/Pcs</p>
                                
                                <h3 class="result-title mt-4">Employee</h3>
                                <p>Total: <span class="result-value" id="numEmployeesResult"></span></p>
                                <p>Salary: <span class="result-value" id="employeeCostResult"></span>/Employee (Monthly)</p>
                                <p>Salary: <span class="result-value" id="employeeCostResultDay"></span>/Employee (Daily)</p>
                                
                                <h3 class="result-title mt-4">Planning</h3>
                                <p>Profit Target: <span class="result-value" id="targetIncomeResult"></span></p>
                                <p class="highlight">Minimum Sales: <span class="result-value" id="minDailySalesResult"></span>/Day</p>
                                <p>Work Days: <span class="result-value" id="workscheduleResult"></span>/Week</p>
                                <p>Work Days: <span class="result-value" id="totalworkscheduleResult"></span>/Month</p>
                                
                                <h3 class="result-title mt-4">Total Money Needs</h3>
                                <p>Daily: <span class="result-value" id="DailyMoneyNeedsResult"></span></p>
                                <p>Weekly: <span class="result-value" id="WeeklyMoneyNeedsResult"></span></p>
                                <p class="highlight">Monthly: <span class="result-value" id="MonthlyMoneyNeedsResult"></span></p>
                            </div>
                        </div>
                    </div>
                    
                    <div class="chart-container">
                        <canvas id="salesChart"></canvas>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Bootstrap JS (Popper.js and Bootstrap JS) -->
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.6/dist/umd/popper.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.min.js"></script>
    <!-- jQuery -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    
    <script>
        let salesChart;
        
        document.getElementById('recommendationForm').addEventListener('submit', function (event) {
            event.preventDefault();
            
            // Get input values
            const workschedule = parseFloat(document.getElementById('workschedule').value);
            const modalPrice = parseFloat(document.getElementById('modalPrice').value);
            const employeeCost = parseFloat(document.getElementById('employeeCost').value);
            const numEmployees = parseInt(document.getElementById('numEmployees').value);
            const profitPercentage = parseFloat(document.getElementById('profitPercentage').value);
            const targetIncome = parseFloat(document.getElementById('targetIncome').value);
            
            // Perform calculations
            const totalworkschedule = workschedule * 4;
            const employeeCostDay = employeeCost / totalworkschedule;
            const totalPrice = modalPrice + (modalPrice * profitPercentage / 100);
            const profit = modalPrice * profitPercentage / 100;
            const minDailySales = Math.ceil((((employeeCost * numEmployees) + targetIncome) / profit) / totalworkschedule);
            
            const DailyMoneyNeeds = Math.ceil((employeeCostDay * numEmployees) + (modalPrice * minDailySales));
            const WeeklyMoneyNeeds = Math.ceil((employeeCostDay * numEmployees) + (modalPrice * minDailySales) * workschedule);
            const MonthlyMoneyNeeds = Math.ceil((employeeCostDay * numEmployees) + (modalPrice * minDailySales) * totalworkschedule);
            
            // Format numbers with Indonesian locale
            const formatIDR = (number) => {
                return new Intl.NumberFormat('id-ID', { 
                    style: 'currency', 
                    currency: 'IDR',
                    minimumFractionDigits: 0
                }).format(number);
            };
            
            // Display results
            document.getElementById('modalPriceResult').textContent = formatIDR(modalPrice);
            document.getElementById('profitResult').textContent = formatIDR(profit);
            document.getElementById('profitPercentageResult').textContent = profitPercentage + '%';
            document.getElementById('totalPriceResult').textContent = formatIDR(totalPrice);
            
            document.getElementById('numEmployeesResult').textContent = numEmployees;
            document.getElementById('employeeCostResult').textContent = formatIDR(employeeCost);
            document.getElementById('employeeCostResultDay').textContent = formatIDR(employeeCostDay);
            
            document.getElementById('targetIncomeResult').textContent = formatIDR(targetIncome);
            document.getElementById('minDailySalesResult').textContent = minDailySales;
            document.getElementById('workscheduleResult').textContent = workschedule;
            document.getElementById('totalworkscheduleResult').textContent = totalworkschedule;
            
            document.getElementById('DailyMoneyNeedsResult').textContent = formatIDR(DailyMoneyNeeds);
            document.getElementById('WeeklyMoneyNeedsResult').textContent = formatIDR(WeeklyMoneyNeeds);
            document.getElementById('MonthlyMoneyNeedsResult').textContent = formatIDR(MonthlyMoneyNeeds);
            
            // Update or create chart
            updateChart(minDailySales, workschedule, totalworkschedule);
        });
        
        function updateChart(dailySales, workDaysPerWeek, totalWorkDays) {
            const ctx = document.getElementById('salesChart').getContext('2d');
            
            const weeklySales = dailySales * workDaysPerWeek;
            const monthlySales = dailySales * totalWorkDays;
            
            if (salesChart) {
                salesChart.destroy();
            }
            
            salesChart = new Chart(ctx, {
                type: 'bar',
                data: {
                    labels: ['Daily', 'Weekly', 'Monthly'],
                    datasets: [{
                        label: 'Sales Targets',
                        data: [dailySales, weeklySales, monthlySales],
                        backgroundColor: [
                            'rgba(40, 167, 69, 0.7)',
                            'rgba(23, 162, 184, 0.7)',
                            'rgba(108, 117, 125, 0.7)'
                        ],
                        borderColor: [
                            'rgba(40, 167, 69, 1)',
                            'rgba(23, 162, 184, 1)',
                            'rgba(108, 117, 125, 1)'
                        ],
                        borderWidth: 1
                    }]
                },
                options: {
                    responsive: true,
                    plugins: {
                        legend: {
                            position: 'top',
                        },
                        tooltip: {
                            callbacks: {
                                label: function(context) {
                                    return `${context.dataset.label}: ${context.raw} units`;
                                }
                            }
                        }
                    },
                    scales: {
                        y: {
                            beginAtZero: true,
                            title: {
                                display: true,
                                text: 'Units to Sell'
                            }
                        }
                    }
                }
            });
        }
    </script>
</body>
</html>
